여러 글을 한 번에 출력해보자 (EJS 문법2)

 

0:00 자바스크립트 반복문

3:57 ejs 반복문

7:28 상단바만들기

 

 

 

저번 시간에 서버에 있던 데이터를 html에 꽂아넣어봤는데 

그런데 지금 DB에 있던 글이 한두개라서 망정이지 글이 100개 있으면 어쩔 것입니까

100번 코드짜야하는거 아닙니까 

그게 싫으면 반복문이라는 좋은 문법이 있습니다. 





 

반복문 모를까봐 설명시간

 

비슷하게 생긴 코드를 복붙하고 싶으면 자바스크립트에서 반복문이라는 좋은 문법을 씁니다.

예를 들어 

 

console.log(1)
console.log(2)
console.log(3)


그럼 직접 이렇게 노가다해서 3줄 작성해놨는데

이렇게 비슷하게 생긴 코드는 반복문 쓰면 쉽게 복붙할 수 있습니다. 

 

 

for (let i = 0; i < 3; i++){
  console.log(1)
}


for () {} 열고 

소괄호 안에는 복붙할 횟수

중괄호 안에는 복붙할 코드 

넣어주면 됩니다. 

 

 

근데 실행해보면 아까랑 약간 다른데

아까는 1 2 3 이 출력되었는데 지금은 1 1 1이 출력됩니다.

당연히 console.log(1) 이 코드를 3번 복붙해주세요 라고 코드짜놨으니까 그렇죠 

 

그게 싫으면

console.log(1) 대신 

console.log(복붙마다 1, 2, 3 으로 바뀌는 변수) 를 넣으면 되는것 아닙니까

그런 변수가 있냐고요?

 
 

 

for (let i = 0; i < 3; i++){
  console.log(i)
}


반복문 안에서 쓸 수 있는 i라는 변수가 있습니다. 

i 변수 출력해보면 복붙될 때 마다 0, 1, 2 이런 식으로 변합니다. 

왜냐면 실은 소괄호 안에 뭘 적은거냐면

1. i라는 변수를 0으로 만들고 

2. 이게 3이 되기 전까지

3. 계속 i에 +1 하면서 안에 있는 코드를 복붙해주세요

라고 적었기 때문에 그렇습니다. 

그래서 i 변수는 복붙할 때마다 0, 1, 2 ... 이런 식으로 변합니다 

 

 

 

그럼 아까로 돌아가서

1, 2, 3을 차례로 출력해보고 싶으면 어떻게하죠? 

그건 알아서 해보도록 합시다. 

 

 

 

ejs 파일 안에서 자바스크립트 문법 쓰기

 

다행히 ejs 파일안에서도 자바스크립트 문법을 그대로 쓸 수 있습니다.

for 문법도 쓸 수 있어서 충격적이게도 html도 복붙가능 

 

ejs 파일 안에서 for if 등 자바스크립트 문법을 사용하고 싶으면  

<% %> 안에 작성하면 됩니다.

 

 

 

(list.ejs)

<% for (var i = 0; i < 3; i++){ %>
  <h4>안뇽</h4>
<% } %> 


예를 들어 이런 식으로 html 사이에 아무데나 for 문법 사용이 가능합니다. 

그럼 <h4>안뇽</h4> 이게 3번이나 반복생성되겠군요. 

 

 

 

 

(list.ejs)

<% for (var i = 0; i < 글목록.length; i++){ %>

  <div class="white-box">
    <div class="list-box">
    <h4><%= 글목록[0].title %></h4>
    <p>글내용임</p>
  </div>

<% } %> 


그래서 글이 100개 있으면 직접 <h4>글제목</h4> 도 100개 코딩할 필요가 없습니다. 

그냥 for 이용해서 글 갯수만큼 복붙하라고 코드짜면 끝임 

참고로 array자료안에 들어있는 자료 갯수를 출력해보고 싶으면 .length를 뒤에 붙입니다.

그래서 글목록.length 만큼 복붙하라고 코드짰습니다. 

 

 

 

참고로 if문법도 쓸 수 있는데 그러면 html을 조건부로 보여줄 수도 있습니다 

그럼 재밌는 UI도 만들 수 있지 않을까요 

뭐 예를 들어 글마다 좋아요 갯수같은게 있는데

좋아요 갯수가 50 이상이면 "hot" 이런 이미지를 옆에 띄워주는겁니다.

그런 식으로 조건에 따라 달라지는 html도 만들 수 있겠군요. 

 

 

 

html을 조립식으로 첨부하기 (include) 

 

ejs 파일을 다른 ejs 파일에 넣을 수도 있습니다 

그러니까 여러 ejs 파일에서 계속 자주 사용하는 html 덩어리들이 있으면 

그걸 ejs파일로 따로 만들어놓고 다른 ejs파일에서 불러와서 쓰는 식으로도 코드짤 수 있습니다.

그럼 편하겠죠?

 

예를 들어 상단메뉴같은건 모든 페이지에 필요한데

매번 페이지마다 길고 긴 상단메뉴 html을 복붙하는게 귀찮으면

이렇게 코드짜도 될듯요 

 

 

 

(views/nav.ejs)

<div class="nav">
  <a class="logo">Appleforum</a>
  <a>page1</a>
  <a>page2</a>
</div>


1. 이렇게 nav.ejs 파일을 views 폴더 안에 만들어두고 자주 사용할 html을 넣어둡니다. 

 

 

(list.ejs)

<%- include('nav.ejs') %>


2. 필요한 곳에 가서 <%- include('nav.ejs') %> 를 사용합니다. 

그럼 nav.ejs 안에 있던 html들이 그 자리에 붙여넣어집니다. 

아이깔끔해  

 
 

 

<%- %> <%= %> 차이

 

<%- %> 사용하면 그 안에 들어있는게 html인 경우 그걸 실제로 렌더링해줍니다.

그러니까 그 안에 <button> 집어넣으면 진짜 클릭가능한 버튼이 뿅 나옴 

그래서 nav.ejs를 가져다가 쓸 때도 <%- %> 문법을 사용한 것입니다.

 

<%= %> 사용하면 그 안에 들어있는게 html이어도 그걸 렌더링해주진 않고 일반 문자처럼 보여줍니다.

그러니까 그 안에 <button> 집어넣으면 <button>이라는 글자 그대로 뿅 나옴

그래서 원하는거 골라쓰면 됩니다. 

 

참고로 나중에 DB에 html을 저장해둘 때도 있습니다. 

네이버 블로그같은 사이트 보면 글 에디터가 있지 않습니까 그게 실은 html 생성기입니다. 

그래서 블로그 글쓰는 것도 실은 여러분들 html 코딩하는거랑 똑같음

그래서 그걸 DB에 저장해뒀다가 보여주는게 블로그, 게시판 서비스들인데

그때 DB에 저장한 html을 페이지에 렌더링해서 보여주고 싶으면 <%- %> 를 쓰면 유용하겠군요.

그럴 때 빼곤 별로 쓸데없습니다.

 

 

 

ejs 에서 자주쓰는 문법은 이게 전부입니다. 

코딩공부할 때 무슨 고시공부하는거처럼 문법을 전부 다 외우려는 분들이 있는데

코딩할 땐 그딴거 외울 시간이 없습니다.

"그냥 이런게 있구나"라고 알아두고

나중에 검색해서 쓰는게 올바른 코딩방법임 